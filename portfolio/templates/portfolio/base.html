{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Stock Portfolio{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'portfolio/css/styles.css' %}" />

    <!-- Page-specific layout fixes -->
    <style>
      /* make main span full width by default */
      main { width: 100%; }

      /*
       When the body has the class "edit-holding-page":
         â€¢ Navbar stays at the top
         â€¢ The content inside <main> is centered both horizontally & vertically
      */
      body.edit-holding-page {
        min-height: 100vh;
        display: flex;            /* flex container */
        flex-direction: column;   /* navbar on top, main below */
        margin: 0;
      }

      body.edit-holding-page main {
        flex: 1;                  /* occupy remaining height below navbar */
        display: flex;            /* center child */
        justify-content: center;  /* horizontal center */
        align-items: center;      /* vertical center */
        width: 100%;
      }

      /* Ensure navbar always stretches full width */
      nav.navbar {
        width: 100%;
        box-sizing: border-box;
      }
    </style>
</head>

<body class="{% block body_class %}{% endblock %}">
    <!-- Navbar -->
    <nav class="navbar">
        <h2>ðŸ“ˆ Stock Portfolio</h2>
        <div>
            {% if user.is_authenticated %}
                <a href="{% url 'portfolio:dashboard' %}">Dashboard</a>
                <a href="{% url 'portfolio:add_holding' %}">Add Holding</a>
                <form action="{% url 'portfolio:logout' %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn-logout">Logout</button>
                </form>
            {% else %}
                <a href="{% url 'portfolio:login' %}">Login</a>
                <a href="{% url 'portfolio:register' %}">Register</a>
            {% endif %}
            <!-- ðŸ”˜ Theme Toggle -->
            <button class="btn-toggle" onclick="toggleTheme()">Toggle Theme</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <!-- Dark/Light Mode Script -->
    <script>
      function toggleTheme() {
          const current = document.documentElement.getAttribute("data-theme");
          const newTheme = current === "dark" ? "light" : "dark";
          document.documentElement.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
      }

      // Load saved theme on page load
      (function() {
          const saved = localStorage.getItem("theme") || "light";
          document.documentElement.setAttribute("data-theme", saved);
      })();
    </script>
</body>
</html>

